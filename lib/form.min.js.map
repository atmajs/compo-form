{"version":3,"file":"form.js","sources":["D:/atma/components/form/builds/form.js"],"names":["root","factory","_global","global","window","_mask","mask","atma","require","Error","Compo","config","getDOMLibrary","undefined","$","obj_toFlatObject","obj_getType","obj","Object","prototype","toString","call","replace","mix","prefix","out","arguments","type","_getType","forEach","x","i","key","prop","console","warn","error","form_append","form","name","data","filename","val","fileName","append","compo_walk","fn","TreeWalker","walk","compo","Xhr","create","EventEmitter","Deferred","constructor","url","method","this","xhr_","loadPercent","uploadPercent","headers","write","JSON","stringify","writeHeaders","extend","setEndpoint","isBusy","loading_","percent","emit","uploading_","readResponse_","xhr","response","responseText","getResponseHeader","test","parse","String","status","toError_","resp","message","statusText","HttpError","complete_","reject","resolve","send","_this","XMLHttpRequest","onload","upload","onprogress","event","lengthComputable","loaded","total","open","setRequestHeader","Transport","Message","run","_len","length","args","Array","_key","result","actions","unshift","perform","perform_","apply","throw_","defineProperties","body","endpoint","location","href","contentType","params","contenType","serializeHeaders","Content-Type","serialize","formData","get","FormData","configurable","enumerable","ValidationError","createError","getJson","getGetterEndpoint","formCompo","model","xGet","xAction","formatEndpoint","rgx_EntityKey","full","property","getProperty","methodEdit","xMethodEdit","Validation","process","compoName","provider","validate","break","validateUi","Builder","toJson","toJSON","json","deep","createMessage","xContenType","action","xMethod","FormDataCompo","tagName","builder","transport","entity","meta","attributes","form-type","content-type","offset","method-edit","redirect","template","attr","style","slots","submit","events","preventDefault","scope","notificationMsg","notificationType","activity","emitIn","concat","signalState","onRenderStart","model_","ctx","ensureReflect_","ensureCompo_","formLayout_","load","setEntity","getEntity","fail","errored_","done","setModel","notify","xRedirect","set","jmask","children","prepend","klass","xFormType","xOffset","addClass","each","nodes","Template","registerFromTemplate","registerHandler","Dom","COMPONENT","renderStart","createElement","label","text","placeholder"],"mappings":"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"}